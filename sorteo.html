
<!DOCTYPE html>
<html>

<head>
  <title>SORTEO</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script type="text/javascript">
  function randomIntFromInterval(min, max) {
    return Math.floor(Math.random() * (max - min + 1) + min);
  }
  function swapArray(list) {
    var x = randomIntFromInterval(0, list.length - 1);
    var y = randomIntFromInterval(0, list.length - 1);
    var b = list[y];
    list[y] = list[x];
    list[x] = b;
  }
  function actualizaBarra(porcentaje) {
    $("#barra")
      .css('width', porcentaje + '%')
      .attr('aria-valuenow', porcentaje)
      .text(porcentaje + "% Completado");
  }
  $(document).ready(function () {
    $("#inicio").on("click", function () {
      var sorteantes = $('#sorteantes').val().split('\n');
      var sorteados = $('#sorteados').val().split('\n');

      var porcentaje = 0;
      var maxIteraciones = 100000000
      setTimeout(function () {
        actualizaBarra(porcentaje)
      }, 1000);
      for (i = 0; i <= maxIteraciones; i++) {
        swapArray(sorteados);
        porcentaje = (i * 100) / maxIteraciones;
      }
      $("#resultado").empty();
      $("#resultado").append("Resultado del sorteo tras " + maxIteraciones + " iteraciones:<br>");
      for (i = 0; i <= sorteados.length - 1; i++) {
        $("#resultado").append(sorteantes[i] + ".- " + sorteados[i] + "<br>");
      }
    });
  });
</script>

<body>
  <div class="container ">
    <div class="row d-flex align-items-center justify-content-center">
      <div class="col">
        <h1>Sorteo</h1>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <textarea id="sorteantes" cols="40" rows="5"></textarea>
      </div>
      <div class="col">
        <textarea id="sorteados" cols="40" rows="5"></textarea>
      </div>
    </div>
    <div class="row mb-5">
      <div class="col">
        <input type="button" value="Inicio" name="inicio" id="inicio" />
      </div>
    </div>
    <div class="row">
      <div class="col">

        <div class="progress">
          <div id="barra" class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar"
            aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col">

        <h3 id="resultado"></h3>
      </div>
    </div>

</body>

</html>
